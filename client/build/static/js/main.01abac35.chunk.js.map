{"version":3,"sources":["Components/Game.module.css","Components/Landing.module.css","Components/Notification/notification.module.css","utils/apiCall.js","utils/constants.js","Components/Game.js","Components/Landing.js","Components/Lobby.js","Components/Player.js","Components/Playing.js","Components/Notification/Notification.js","index.js"],"names":["module","exports","apiCall","url","options","fetch","method","headers","then","response","ok","console","log","Error","statusText","json","handleErrors","socket","allJobs","Landing","useState","name","setName","job","setJob","useCookies","setCookie","history","useHistory","useEffect","changeJob","shift","push","setTimeout","className","styles","landing","title","src","alt","style","display","type","value","placeholder","input","onChange","e","target","coolButton","onClick","body","JSON","stringify","player","id","catch","err","Lobby","players","adminSelect","initGame","map","p","key","lobbyPlayers","isAdmin","width","Player","me","handleClick","selected","disabled","classes","clickeable","join","jobImage","status","renderJob","Playing","game","events","setTarget","selectTarget","who","find","dayCount","turn","subtitle","playerList","daytime","buttons","mafiaButton","kill","policiaButton","investigate","protect","renderButtons","newDaytime","policeDisabled","alreadyPlayed","includes","medicDisabled","mafiaDisabled","flexGrow","smallButton","changeTurn","policeButton","newDayEnabled","length","toggleDay","pass","kick","reset","renderAdmin","Notification","message","visible","handleOk","notification","Game","setGame","setMe","setNotification","cookies","sessionId","socketIOClient","on","fontSize","marginBottom","winner","emit","nextTurn","from","result","color","event","ReactDOM","render","StrictMode","path","exact","document","getElementById"],"mappings":"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","file":"static/js/main.01abac35.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"Game_game__RYcau\",\"title\":\"Game_title__3Uagc\",\"subtitle\":\"Game_subtitle__l7Thi\",\"adminSelect\":\"Game_adminSelect__2t5sq\",\"cardContainer\":\"Game_cardContainer__3b_U9\",\"allNumbers\":\"Game_allNumbers__2owDI\",\"playerList\":\"Game_playerList__1H81C\",\"day\":\"Game_day__2tUXY\",\"night\":\"Game_night__b9s5w\",\"player\":\"Game_player__3MZVJ\",\"job\":\"Game_job__UQMIx\",\"jobImage\":\"Game_jobImage__Ijw2i\",\"selected\":\"Game_selected__1JxE-\",\"disabled\":\"Game_disabled__39JWk\",\"buttons\":\"Game_buttons__5fBHq\",\"coolButton\":\"Game_coolButton__3e5g_\",\"smallButton\":\"Game_smallButton__2TzgO\",\"mafiaButton\":\"Game_mafiaButton__3LrVC\",\"policiaButton\":\"Game_policiaButton__1c0hW\",\"pass\":\"Game_pass__-haMb\",\"lobbyPlayers\":\"Game_lobbyPlayers__2iM2H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"landing\":\"Landing_landing__hdt2M\",\"title\":\"Landing_title__3hFdR\",\"input\":\"Landing_input__2dzEV\",\"coolButton\":\"Landing_coolButton__2l2ZK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notification\":\"notification_notification__l2thW\",\"coolButton\":\"notification_coolButton__1hWlD\",\"close\":\"notification_close__1nEyt\"};","export default function apiCall(url, options) {\n\n  return fetch(url, {\n    ...options,\n    method: (options && options.method) || \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json;charset=utf-8\",\n    },\n  }).then((response) => handleErrors(response));\n}\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    console.log(response);\n    throw Error(response.statusText);\n  }\n  return response.json();\n}\n","const API_HOST = 'http://localhost:4001';\nconst SESSION_COOKIE = 'mafia-session-id';\n\nexport {\n  API_HOST,\n  SESSION_COOKIE\n}","import React, { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport socketIOClient from \"socket.io-client\";\n\n// Components\nimport Lobby from '../Components/Lobby';\nimport Playing from '../Components/Playing';\nimport Notification from '../Components/Notification/Notification';\n\n// Style\nimport styles from \"./Game.module.css\";\n\n// Utils\nimport { SESSION_COOKIE } from \"../utils/constants\";\n\nlet socket;\nconst Game = () => {\n  const [game, setGame] = useState(null);\n  const [me, setMe] = useState(null);\n  const [notification, setNotification] = useState({\n    visible: false,\n    message: '',\n  });\n  const [cookies] = useCookies([SESSION_COOKIE]);\n\n  useEffect(() => {\n    const sessionId = cookies[SESSION_COOKIE];\n    socket = socketIOClient();\n    // socket = socketIOClient('http://localhost:4001');\n\n    socket.on(\"game\", (game) => {\n      if (game) {\n        console.log(game);\n        if (game.status === 'game_over') {\n          setNotification({\n            visible: true,\n            message: (\n              <>\n                <h3>Juego terminado</h3>\n                <p style={{ fontSize: '20px', marginBottom: '40px' }}>\n                  Ganó {game.winner === 'pueblo' ? 'el pueblo!' : 'la mafia!'}\n                </p>\n              </>\n            ),\n          });\n        } else {\n          setGame(game);\n          if (!me) {\n            const me = game.players.find(p => p.id === sessionId);\n            setMe(me);\n          }\n          if (game.turn === 'policia') {\n            const police = game.players.find(p => p.job === 'policia');\n            if (police.status === 'dead') {\n              setTimeout(() => {\n                socket.emit(\"changeTurn\", { nextTurn: \"admin\", from: 'policia' });\n              }, 3000);\n            }\n          } else if (game.turn === 'medico') {\n            const medic = game.players.find(p => p.job === 'medico');\n            if (medic.status === 'dead') {\n              setTimeout(() => {\n                socket.emit(\"changeTurn\", { nextTurn: \"admin\", from: 'medico' });\n              }, 3000);\n            }\n          }\n        }\n      }\n    });\n\n    socket.on(\"investigate\", (result) => {\n      setNotification({\n        visible: true,\n        message: (\n          <>\n            <b style={{ fontSize: '17px' }}>Resultado de la investigacion:</b>\n            <h2>{result ? <b style={{ color: 'green' }}>POSITIVO</b> : <b style={{ color: 'red' }}>NEGATIVO</b>}</h2>\n          </>\n        ),\n      });\n      socket.emit(\"changeTurn\", { nextTurn: \"admin\" });\n    });\n  }, []);\n\n\n  const emit = (event) => {\n    socket.emit(event);\n  }\n\n  const adminSelect = (value) => {\n    socket.emit('setAdmin', value);\n  }\n\n  const initGame = () => {\n    if (game.players.length < 5) {\n      setNotification({\n        visible: true,\n        message: <h3>Se necesitan al menos 5 jugadores para comenzar</h3>,\n      });\n    } else {\n      emit('beginGame');\n    }\n  }\n\n  const events = {\n    reset: () => emit('reset'),\n    toggleDay: () => emit('toggleDay'),\n    kick: (who) => socket.emit('kick', who),\n    kill: (who) => socket.emit('kill', who),\n    protect: (who) => socket.emit('protect', who),\n    changeTurn: (job) => socket.emit('changeTurn', { nextTurn: job }),\n    investigate: (who) => socket.emit('investigate', who),\n  }\n\n  const closeModal = () => {\n    setNotification({ visible: false, message: '' });\n  }\n\n  if (!game) return <div>Loading...</div>;\n\n  return (\n    <div className={styles.game}>\n      <Notification\n        visible={notification.visible}\n        message={notification.message}\n        handleOk={closeModal} />\n      {game.status === 'new' &&\n        <Lobby\n          players={game.players}\n          initGame={initGame}\n          adminSelect={adminSelect} />\n      }\n\n      {game.status === 'in_progress' &&\n        <Playing me={me} game={game} events={events} />\n      }\n    </div>\n  );\n};\n\nexport default Game;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\n\n// Utils\nimport apiCall from \"../utils/apiCall\";\nimport { SESSION_COOKIE } from \"../utils/constants\";\n\n// Styles\nimport styles from \"./Landing.module.css\";\n\nconst allJobs = ['mafia', 'medico', 'policia', 'pueblo'];\n\nconst Landing = () => {\n  const [name, setName] = useState(\"\");\n  const [job, setJob] = useState(null);\n  const [_, setCookie] = useCookies([SESSION_COOKIE]);\n  const history = useHistory();\n\n  const joinGame = () => {\n    apiCall(`/api/players`, {\n      // apiCall(`http://localhost:4001/api/players`, {\n      method: \"POST\",\n      body: JSON.stringify({ name: name }),\n    })\n      .then((player) => {\n        setCookie(SESSION_COOKIE, player.id);\n        history.push(`/game`)\n      })\n      .catch((err) => console.log(\"Error while creating room\", err));\n  };\n\n  useEffect(() => {\n    changeJob();\n  }, []);\n\n  const changeJob = () => {\n    const job = allJobs.shift();\n    setJob(job);\n    allJobs.push(job);\n    setTimeout(() => {\n      changeJob();\n    }, 1000);\n  }\n\n  return (\n    <div className={styles.landing}>\n      <h1 className={styles.title}>MAFIA</h1>\n      <img src=\"mafia.png\" alt=\"roles\" style={{ display: job === 'mafia' ? 'block' : 'none' }} />\n      <img src=\"medico.png\" alt=\"roles\" style={{ display: job === 'medico' ? 'block' : 'none' }} />\n      <img src=\"policia.png\" alt=\"roles\" style={{ display: job === 'policia' ? 'block' : 'none' }} />\n      <img src=\"pueblo.png\" alt=\"roles\" style={{ display: job === 'pueblo' ? 'block' : 'none' }} />\n      <input\n        type=\"text\"\n        value={name}\n        placeholder=\"NOMBRE\"\n        className={styles.input}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <button className={styles.coolButton} onClick={joinGame} >\n        Unirse al juego\n      </button>\n    </div>\n  );\n};\n\nexport default Landing;\n","import React from 'react'\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst Lobby = ({ players, adminSelect, initGame }) => {\n  return (\n    <>\n      <h1>Sala de espera</h1>\n      <div className={styles.adminSelect}>\n        <label>Moderador</label>\n        <select onChange={e => adminSelect(e.target.value)}>\n          <option value=\"\">Seleccionar...</option>\n          {players.map((p) => {\n            return <option key={p.id} value={p.id}>{p.name}</option>\n          })}\n        </select>\n      </div>\n      <ul className={styles.lobbyPlayers}>\n        {players.map((p) => (\n          <li key={p.id} className={styles.player}>\n            {p.name}\n            {p.isAdmin ? <img src=\"eye.png\" alt=\"admin\" /> : null}\n          </li>\n        ))}\n      </ul>\n      <button\n        onClick={initGame}\n        style={{ width: '100%' }}\n        className={styles.coolButton}>Empezar</button>\n    </>\n  )\n}\n\nexport default Lobby;","import React from 'react';\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst renderJob = (player, me) => {\n  return <span className={styles.job}>\n    {(player.id === me.id || me.isAdmin) &&\n      <img src={`${player.job}.png`}\n        className={styles.jobImage}\n        alt={player.job} />\n    }\n    <img src={`${player.status}.png`} alt={player.status} />\n  </span>;\n}\n\nconst Player = ({ player, me, handleClick, selected, disabled }) => {\n  const classes = [styles.player];\n  if (selected) classes.push(styles.selected);\n  if (disabled) classes.push(styles.disabled);\n  const clickeable = !disabled &&\n    (player.id !== me.id ||\n      (player.id === me.id && me.job === 'medico')\n    );\n\n  return (\n    <li className={classes.join(' ')} onClick={() => clickeable && handleClick(player.id)}>\n      <span>{player.name}</span>\n      {renderJob(player, me)}\n    </li>\n  );\n};\n\nexport default Player;","import React, { useState } from 'react'\n\n// Components \nimport Player from './Player';\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst renderAdmin = (game, events, target) => {\n  const buttons = [];\n  const newDaytime = game.daytime === 'day' ? 'noche' : 'dia';\n\n  if (game.daytime === 'night') {\n    const policeDisabled = game.alreadyPlayed.includes('policia');\n    const medicDisabled = game.alreadyPlayed.includes('medico');\n    const mafiaDisabled = game.alreadyPlayed.includes('mafia');\n    buttons.push(<button\n      key=\"mafia\"\n      style={{ flexGrow: 1 }}\n      className={[styles.smallButton, styles.mafiaButton].join(' ')}\n      onClick={() => events.changeTurn('mafia')}\n      disabled={mafiaDisabled}>Mafia</button>);\n    buttons.push(<button\n      key=\"medico\"\n      style={{ flexGrow: 1 }}\n      className={styles.smallButton}\n      onClick={() => events.changeTurn('medico')}\n      disabled={medicDisabled}>Medico</button>);\n    buttons.push(<button\n      key=\"policia\"\n      style={{ flexGrow: 1 }}\n      className={[styles.smallButton, styles.policeButton].join(' ')}\n      onClick={() => events.changeTurn('policia')}\n      disabled={policeDisabled}>Policia</button>);\n  }\n  const newDayEnabled = game.alreadyPlayed.length >= 3 || game.daytime === 'day';\n  buttons.push(<button\n    key=\"pass\"\n    onClick={events.toggleDay}\n    className={[styles.smallButton, styles.pass].join(' ')}\n    disabled={!newDayEnabled}>Pasar a {newDaytime}</button>);\n  buttons.push(<button\n    key=\"kick\"\n    disabled={!target}\n    style={{ flexGrow: 2 }}\n    onClick={() => events.kick(target.id)}\n    className={styles.smallButton}>Echar {target ? `a ${target.name}` : ''}</button>);\n  buttons.push(<button\n    key=\"reset\"\n    style={{ flexGrow: 2 }}\n    onClick={events.reset}\n    className={styles.smallButton}>Volver a empezar</button>);\n\n  return [...buttons]\n}\n\nconst renderButtons = (turn, me, events, target) => {\n  if (me.status === 'dead') return null;\n  if (turn !== me.job) return null;\n\n  const classes = [styles.coolButton];\n  switch (me.job) {\n    case 'mafia': {\n      classes.push(styles.mafiaButton);\n      return (\n        <button disabled={!target} className={classes.join(' ')} onClick={() => events.kill(target.id)}>\n          Matar {target ? `a ${target.name}` : ''}\n        </button>\n      );\n    }\n    case 'policia': {\n      classes.push(styles.policiaButton);\n      return (\n        <button disabled={!target} className={classes.join(' ')} onClick={() => events.investigate(target.id)}>\n          Investigar {target ? `a ${target.name}` : ''}\n        </button>\n      );\n    }\n    case 'medico': {\n      return (\n        <button disabled={!target} className={classes.join(' ')} onClick={() => events.protect(target.id)}>\n          Proteger {target ? `a ${target.name}` : ''}\n        </button>\n      );\n    }\n    default: return null;\n  }\n}\n\nconst Playing = ({ game, me, events }) => {\n  const [target, setTarget] = useState(null);\n\n  const selectTarget = (who) => {\n    if (target && target.id === who) {\n      setTarget(null);\n    } else {\n      const target = game.players.find(p => p.id === who);\n      setTarget(target);\n    }\n  }\n\n  if (!me) return <div>Loading...</div>;\n  return (\n    <>\n      <h2 className={styles.title}>Dia {game.dayCount}</h2>\n      {game.turn !== 'admin' && <h4 className={styles.subtitle}>Es el turno de <b>{game.turn}</b></h4>}\n      <div className={[styles.playerList, styles[game.daytime]].join(' ')}>\n        <ul>\n          {game.players.map((p) => {\n            if (p.isAdmin) return null;\n            const selected = me.job === game.turn && target && target.id === p.id;\n            const disabled = p.status === 'dead';\n            return (\n              <Player\n                key={p.id}\n                player={p}\n                me={me}\n                handleClick={selectTarget}\n                selected={selected}\n                disabled={disabled}\n              />\n            )\n          })}\n        </ul>\n      </div>\n      <div className={styles.buttons}>\n        {renderButtons(game.turn, me, events, target)}\n        {me.isAdmin && renderAdmin(game, events, target)}\n      </div>\n    </>\n  )\n}\n\nexport default Playing;","import React from 'react';\nimport styles from './notification.module.css';\n\nconst Notification = ({ message, visible, handleOk }) => {\n  console.log('visible', visible);\n  if (!visible) return null;\n  return (\n    <div className={styles.notification}>\n      {message}\n      <button onClick={handleOk} className={styles.coolButton}>OK</button>\n    </div>\n  );\n};\n\nexport default Notification;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport Landing from \"./Components/Landing\";\nimport Game from \"./Components/Game\";\n\n// import * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Landing />\n        </Route>\n        <Route path=\"/game\" exact>\n          <Game />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}