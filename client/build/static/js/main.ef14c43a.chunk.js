(this.webpackJsonpbingo=this.webpackJsonpbingo||[]).push([[0],{3:function(e,a,t){e.exports={game:"Game_game__RYcau",title:"Game_title__3Uagc",subtitle:"Game_subtitle__l7Thi",adminSelect:"Game_adminSelect__2t5sq",cardContainer:"Game_cardContainer__3b_U9",allNumbers:"Game_allNumbers__2owDI",playerList:"Game_playerList__1H81C",day:"Game_day__2tUXY",night:"Game_night__b9s5w",player:"Game_player__3MZVJ",job:"Game_job__UQMIx",selected:"Game_selected__1JxE-",disabled:"Game_disabled__39JWk"}},49:function(e,a,t){e.exports=t(91)},54:function(e,a,t){},88:function(e,a){},9:function(e,a,t){e.exports={landing:"Landing_landing__hdt2M",title:"Landing_title__3hFdR",newRoom:"Landing_newRoom__1mEHR",subtitle:"Landing_subtitle__sOLCb",roomName:"Landing_roomName__lQ_vz",input:"Landing_input__2dzEV",button:"Landing_button__3Vf0K"}},91:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),r=t(45),l=t.n(r),c=t(24),u=t(1),o=(t(54),t(7)),m=t(92),s=t(27);function d(e,a){return fetch(e,Object(s.a)(Object(s.a)({},a),{},{method:a&&a.method||"GET",headers:{"Content-Type":"application/json;charset=utf-8"}})).then((function(e){return function(e){if(!e.ok)throw console.log(e),Error(e.statusText);return e.json()}(e)}))}var f,b=t(9),g=t.n(b),p=function(){var e=Object(n.useState)(""),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(m.a)(["mafia-session-id"]),c=Object(o.a)(l,2),s=(c[0],c[1]),f=Object(u.f)();return i.a.createElement("div",{className:g.a.landing},i.a.createElement("h2",{className:g.a.title},"Mafia!"),i.a.createElement("section",{className:g.a.newRoom},i.a.createElement("p",{className:g.a.subtitle},"Ingresa tu nombre"),i.a.createElement("label",{className:g.a.roomName},"Nombre"),i.a.createElement("input",{type:"text",className:g.a.input,value:t,onChange:function(e){return r(e.target.value)}}),i.a.createElement("button",{className:g.a.button,onClick:function(){d("/api/players",{method:"POST",body:JSON.stringify({name:t})}).then((function(e){s("mafia-session-id",e.id),f.push("/game")})).catch((function(e){return console.log("Error while creating room",e)}))}},"Unirse al juego")))},_=t(47),E=t.n(_),h=t(3),y=t.n(h),k=function(e){var a=e.players,t=e.adminSelect,n=e.initGame;return i.a.createElement(i.a.Fragment,null,i.a.createElement("h4",null,"Jugadores"),i.a.createElement("div",{className:y.a.adminSelect},i.a.createElement("label",null,"Moderador"),i.a.createElement("select",{onChange:function(e){return t(e.target.value)}},i.a.createElement("option",{value:""},"Seleccionar..."),a.map((function(e){return i.a.createElement("option",{key:e.name,value:e.name},e.name)})))),i.a.createElement("ul",null,a.map((function(e){return i.a.createElement("li",{key:e.id},e.name," ",e.isAdmin?" -> A":"")}))),i.a.createElement("button",{onClick:n},"Empezar"))},v=function(e){var a=e.player,t=e.me,n=e.handleClick,r=e.selected,l=e.disabled,c=[y.a.player];return r&&c.push(y.a.selected),l&&c.push(y.a.disabled),i.a.createElement("li",{className:c.join(" "),onClick:function(){return!l&&n(a.id)}},i.a.createElement("span",null,a.name),function(e,a){var t=e.status;return(a.isAdmin||e.id==a.id)&&(t=e.job),i.a.createElement("span",{className:y.a.job},t)}(a,t))},j=function(e){var a=e.game,t=e.me,r=e.events,l=Object(n.useState)(null),c=Object(o.a)(l,2),u=c[0],m=c[1],s=function(e){var t=a.players.find((function(a){return a.id===e}));m(t)};return t?i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{className:y.a.title},"Juego en curso"),"admin"!==a.turn&&i.a.createElement("h4",{className:y.a.subtitle},"Es el turno de ",i.a.createElement("b",null,a.turn)),i.a.createElement("div",{className:[y.a.playerList,y.a.day].join(" ")},i.a.createElement("ul",null,a.players.map((function(e){if(e.isAdmin)return null;var n=t.job===a.turn&&u&&u.id===e.id,r="dead"===e.status||e.id===t.id;return i.a.createElement(v,{key:e.id,player:e,me:t,handleClick:s,selected:n,disabled:r})})))),function(e,a,t,n){if(e===a.job)switch(a.job){case"mafia":return i.a.createElement("button",{onClick:function(){return t.kill(n.id)}},"Matar ",n?"a ".concat(n.name):"");case"policia":return i.a.createElement("button",{onClick:function(){return t.investigate(n.id)}},"Investigar ",n?"a ".concat(n.name):"");case"medico":return i.a.createElement("button",{onClick:function(){return t.protect(n.id)}},"Proteger ",n?"a ".concat(n.name):"");default:return null}return null}(a.turn,t,r,u),t.isAdmin&&function(e,a,t){var n=[],r="day"===e.daytime?"noche":"dia";if("night"===e.daytime){var l=e.alreadyPlayed.includes("policia"),c=e.alreadyPlayed.includes("medico"),u=e.alreadyPlayed.includes("mafia");n.push(i.a.createElement("button",{key:"mafia",onClick:function(){return a.changeTurn("mafia")},disabled:u},"Mafia")),n.push(i.a.createElement("button",{key:"medico",onClick:function(){return a.changeTurn("medico")},disabled:c},"Medico")),n.push(i.a.createElement("button",{key:"policia",onClick:function(){return a.changeTurn("policia")},disabled:l},"Policia"))}var o=e.alreadyPlayed>=3||"day"===e.daytime;return n.push(i.a.createElement("button",{onClick:a.toggleDay,key:"pass",disabled:!o},"Pasar a ",r)),n.push(i.a.createElement("button",{onClick:function(){return a.kick(t.id)},key:"kick"},"Echar ",t?"a ".concat(t.name):"")),n.push(i.a.createElement("button",{onClick:a.reset,key:"reset"},"Volver a empezar")),[].concat(n)}(a,r,u)):i.a.createElement("div",null,"Loading...")},C=function(){var e=Object(n.useState)(null),a=Object(o.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),c=Object(o.a)(l,2),u=c[0],s=c[1],d=Object(m.a)(["mafia-session-id"]),b=Object(o.a)(d,1)[0];Object(n.useEffect)((function(){var e=b["mafia-session-id"];(f=E()()).on("game",(function(a){if(a)if(console.log(a),"game_over"===a.status)alert("Gan\xf3 "+a.winner);else{r(a);var t=a.players.find((function(a){return a.id===e}));s(t)}})),f.on("investigate",(function(e){alert("Resultado: "+e),f.emit("changeTurn","admin")}))}),[]);var g=function(e){f.emit(e)},p={reset:function(){return g("reset")},toggleDay:function(){return g("toggleDay")},kick:function(e){return f.emit("kick",e)},kill:function(e){return f.emit("kill",e)},protect:function(e){return f.emit("protect",e)},changeTurn:function(e){return f.emit("changeTurn",e)},investigate:function(e){return f.emit("investigate",e)}};return t?i.a.createElement("div",{className:y.a.game},"new"===t.status&&i.a.createElement(k,{players:t.players,initGame:function(){t.players.length<5?alert("Se necesitan al menos 5 jugadores para comenzar"):g("beginGame")},adminSelect:function(e){f.emit("setAdmin",e)}}),"in_progress"===t.status&&i.a.createElement(j,{me:u,game:t,events:p})):i.a.createElement("div",null,"Loading")};l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/",exact:!0},i.a.createElement(p,null)),i.a.createElement(u.a,{path:"/game",exact:!0},i.a.createElement(C,null))))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.ef14c43a.chunk.js.map