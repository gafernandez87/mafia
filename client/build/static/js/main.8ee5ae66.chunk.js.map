{"version":3,"sources":["Components/Game.module.css","Components/Landing.module.css","utils/apiCall.js","utils/constants.js","Components/Game.js","Components/Landing.js","Components/Lobby.js","Components/Player.js","Components/Playing.js","index.js"],"names":["module","exports","apiCall","url","options","fetch","method","headers","then","response","ok","console","log","Error","statusText","json","handleErrors","socket","allJobs","Landing","useState","name","setName","job","setJob","useCookies","setCookie","history","useHistory","useEffect","changeJob","shift","push","setTimeout","className","styles","landing","title","src","alt","type","value","placeholder","input","onChange","e","target","coolButton","onClick","body","JSON","stringify","player","id","catch","err","Lobby","players","adminSelect","initGame","map","p","key","lobbyPlayers","isAdmin","style","width","Player","me","handleClick","selected","disabled","classes","clickeable","join","jobImage","status","renderJob","Playing","game","events","setTarget","selectTarget","who","find","dayCount","turn","subtitle","playerList","daytime","buttons","mafiaButton","kill","policiaButton","investigate","protect","renderButtons","newDaytime","policeDisabled","alreadyPlayed","includes","medicDisabled","mafiaDisabled","flexGrow","smallButton","changeTurn","policeButton","newDayEnabled","length","toggleDay","pass","kick","reset","renderAdmin","Game","setGame","setMe","cookies","sessionId","socketIOClient","on","alert","winner","result","emit","event","ReactDOM","render","StrictMode","path","exact","document","getElementById"],"mappings":"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","file":"static/js/main.8ee5ae66.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"Game_game__RYcau\",\"title\":\"Game_title__3Uagc\",\"subtitle\":\"Game_subtitle__l7Thi\",\"adminSelect\":\"Game_adminSelect__2t5sq\",\"cardContainer\":\"Game_cardContainer__3b_U9\",\"allNumbers\":\"Game_allNumbers__2owDI\",\"playerList\":\"Game_playerList__1H81C\",\"day\":\"Game_day__2tUXY\",\"night\":\"Game_night__b9s5w\",\"player\":\"Game_player__3MZVJ\",\"job\":\"Game_job__UQMIx\",\"jobImage\":\"Game_jobImage__Ijw2i\",\"selected\":\"Game_selected__1JxE-\",\"disabled\":\"Game_disabled__39JWk\",\"buttons\":\"Game_buttons__5fBHq\",\"coolButton\":\"Game_coolButton__3e5g_\",\"smallButton\":\"Game_smallButton__2TzgO\",\"mafiaButton\":\"Game_mafiaButton__3LrVC\",\"policiaButton\":\"Game_policiaButton__1c0hW\",\"pass\":\"Game_pass__-haMb\",\"lobbyPlayers\":\"Game_lobbyPlayers__2iM2H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"landing\":\"Landing_landing__hdt2M\",\"title\":\"Landing_title__3hFdR\",\"input\":\"Landing_input__2dzEV\",\"coolButton\":\"Landing_coolButton__2l2ZK\"};","export default function apiCall(url, options) {\n\n  return fetch(url, {\n    ...options,\n    method: (options && options.method) || \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json;charset=utf-8\",\n    },\n  }).then((response) => handleErrors(response));\n}\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    console.log(response);\n    throw Error(response.statusText);\n  }\n  return response.json();\n}\n","const API_HOST = 'http://localhost:4001';\nconst SESSION_COOKIE = 'mafia-session-id';\n\nexport {\n  API_HOST,\n  SESSION_COOKIE\n}","import React, { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport socketIOClient from \"socket.io-client\";\n\n// Components\nimport Lobby from '../Components/Lobby';\nimport Playing from '../Components/Playing';\n\n// Style\nimport styles from \"./Game.module.css\";\n\n// Utils\nimport { SESSION_COOKIE } from \"../utils/constants\";\n\nlet socket;\nconst Game = () => {\n  const [game, setGame] = useState(null);\n  const [me, setMe] = useState(null);\n  const [cookies] = useCookies([SESSION_COOKIE]);\n\n  useEffect(() => {\n    const sessionId = cookies[SESSION_COOKIE];\n    socket = socketIOClient();\n    // socket = socketIOClient('http://localhost:4001');\n\n    socket.on(\"game\", (game) => {\n      if (game) {\n        console.log(game);\n        if (game.status === 'game_over') {\n          alert(\"GanÃ³ \" + game.winner);\n        } else {\n          setGame(game);\n          const me = game.players.find(p => p.id === sessionId);\n          setMe(me);\n        }\n      }\n    });\n\n    socket.on(\"investigate\", (result) => {\n      alert('Resultado: ' + result);\n      socket.emit(\"changeTurn\", \"admin\");\n    });\n  }, []);\n\n\n  const emit = (event) => {\n    socket.emit(event);\n  }\n\n  const adminSelect = (value) => {\n    socket.emit('setAdmin', value);\n  }\n\n  const initGame = () => {\n    if (game.players.length < 5) {\n      alert(\"Se necesitan al menos 5 jugadores para comenzar\");\n    } else {\n      emit('beginGame');\n    }\n  }\n\n  const events = {\n    reset: () => emit('reset'),\n    toggleDay: () => emit('toggleDay'),\n    kick: (who) => socket.emit('kick', who),\n    kill: (who) => socket.emit('kill', who),\n    protect: (who) => socket.emit('protect', who),\n    changeTurn: (job) => socket.emit('changeTurn', job),\n    investigate: (who) => socket.emit('investigate', who),\n  }\n\n  if (!game) return <div>Loading...</div>;\n\n  return (\n    <div className={styles.game}>\n      {game.status === 'new' &&\n        <Lobby\n          players={game.players}\n          initGame={initGame}\n          adminSelect={adminSelect} />\n      }\n\n      {game.status === 'in_progress' &&\n        <Playing me={me} game={game} events={events} />\n      }\n    </div>\n  );\n};\n\nexport default Game;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useCookies } from \"react-cookie\";\n\n// Utils\nimport apiCall from \"../utils/apiCall\";\nimport { SESSION_COOKIE } from \"../utils/constants\";\n\n// Styles\nimport styles from \"./Landing.module.css\";\n\nconst allJobs = ['mafia.png', 'medico.png', 'policia.png', 'pueblo.png'];\n\nconst Landing = () => {\n  const [name, setName] = useState(\"\");\n  const [job, setJob] = useState(\"\");\n  const [_, setCookie] = useCookies([SESSION_COOKIE]);\n  const history = useHistory();\n\n  const joinGame = () => {\n    apiCall(`/api/players`, {\n      // apiCall(`http://localhost:4001/api/players`, {\n      method: \"POST\",\n      body: JSON.stringify({ name: name }),\n    })\n      .then((player) => {\n        setCookie(SESSION_COOKIE, player.id);\n        history.push(`/game`)\n      })\n      .catch((err) => console.log(\"Error while creating room\", err));\n  };\n\n  useEffect(() => {\n    changeJob();\n  }, []);\n\n  const changeJob = () => {\n    const job = allJobs.shift();\n    setJob(job);\n    allJobs.push(job);\n    setTimeout(() => {\n      changeJob();\n    }, 1000);\n  }\n\n  return (\n    <div className={styles.landing}>\n      <h1 className={styles.title}>MAFIA</h1>\n      <img src={job} alt=\"roles\" />\n      <input\n        type=\"text\"\n        value={name}\n        placeholder=\"NOMBRE\"\n        className={styles.input}\n        onChange={(e) => setName(e.target.value)}\n      />\n      <button className={styles.coolButton} onClick={joinGame} >\n        Unirse al juego\n      </button>\n    </div>\n  );\n};\n\nexport default Landing;\n","import React from 'react'\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst Lobby = ({ players, adminSelect, initGame }) => {\n  return (\n    <>\n      <h1>Sala de espera</h1>\n      <div className={styles.adminSelect}>\n        <label>Moderador</label>\n        <select onChange={e => adminSelect(e.target.value)}>\n          <option value=\"\">Seleccionar...</option>\n          {players.map((p) => {\n            return <option key={p.id} value={p.id}>{p.name}</option>\n          })}\n        </select>\n      </div>\n      <ul className={styles.lobbyPlayers}>\n        {players.map((p) => (\n          <li key={p.id} className={styles.player}>\n            {p.name}\n            {p.isAdmin ? <img src=\"eye.png\" alt=\"admin\" /> : null}\n          </li>\n        ))}\n      </ul>\n      <button\n        onClick={initGame}\n        style={{ width: '100%' }}\n        className={styles.coolButton}>Empezar</button>\n    </>\n  )\n}\n\nexport default Lobby;","import React from 'react';\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst renderJob = (player, me) => {\n  return <span className={styles.job}>\n    {(player.id === me.id || me.isAdmin) &&\n      <img src={`${player.job}.png`}\n        className={styles.jobImage}\n        alt={player.job} />\n    }\n    <img src={`${player.status}.png`} alt={player.status} />\n  </span>;\n}\n\nconst Player = ({ player, me, handleClick, selected, disabled }) => {\n  const classes = [styles.player];\n  if (selected) classes.push(styles.selected);\n  if (disabled) classes.push(styles.disabled);\n  const clickeable = !disabled && player.id !== me.id;\n\n  return (\n    <li className={classes.join(' ')} onClick={() => clickeable && handleClick(player.id)}>\n      <span>{player.name}</span>\n      {renderJob(player, me)}\n    </li>\n  );\n};\n\nexport default Player;","import React, { useState } from 'react'\n\n// Components \nimport Player from './Player';\n\n// Style\nimport styles from \"./Game.module.css\";\n\nconst renderAdmin = (game, events, target) => {\n  const buttons = [];\n  const newDaytime = game.daytime === 'day' ? 'noche' : 'dia';\n\n  if (game.daytime === 'night') {\n    const policeDisabled = game.alreadyPlayed.includes('policia');\n    const medicDisabled = game.alreadyPlayed.includes('medico');\n    const mafiaDisabled = game.alreadyPlayed.includes('mafia');\n    buttons.push(<button\n      key=\"mafia\"\n      style={{ flexGrow: 1 }}\n      className={[styles.smallButton, styles.mafiaButton].join(' ')}\n      onClick={() => events.changeTurn('mafia')}\n      disabled={mafiaDisabled}>Mafia</button>);\n    buttons.push(<button\n      key=\"medico\"\n      style={{ flexGrow: 1 }}\n      className={styles.smallButton}\n      onClick={() => events.changeTurn('medico')}\n      disabled={medicDisabled}>Medico</button>);\n    buttons.push(<button\n      key=\"policia\"\n      style={{ flexGrow: 1 }}\n      className={[styles.smallButton, styles.policeButton].join(' ')}\n      onClick={() => events.changeTurn('policia')}\n      disabled={policeDisabled}>Policia</button>);\n  }\n  const newDayEnabled = game.alreadyPlayed.length >= 3 || game.daytime === 'day';\n  buttons.push(<button\n    key=\"pass\"\n    onClick={events.toggleDay}\n    className={[styles.smallButton, styles.pass].join(' ')}\n    disabled={!newDayEnabled}>Pasar a {newDaytime}</button>);\n  buttons.push(<button\n    key=\"kick\"\n    disabled={!target}\n    style={{ flexGrow: 2 }}\n    onClick={() => events.kick(target.id)}\n    className={styles.smallButton}>Echar {target ? `a ${target.name}` : ''}</button>);\n  buttons.push(<button\n    key=\"reset\"\n    style={{ flexGrow: 2 }}\n    onClick={events.reset}\n    className={styles.smallButton}>Volver a empezar</button>);\n\n  return [...buttons]\n}\n\nconst renderButtons = (turn, me, events, target) => {\n  if (turn === me.job) {\n    const classes = [styles.coolButton];\n    switch (me.job) {\n      case 'mafia': {\n        classes.push(styles.mafiaButton);\n        return (\n          <button disabled={!target} className={classes.join(' ')} onClick={() => events.kill(target.id)}>\n            Matar {target ? `a ${target.name}` : ''}\n          </button>\n        );\n      }\n      case 'policia': {\n        classes.push(styles.policiaButton);\n        return (\n          <button disabled={!target} className={classes.join(' ')} onClick={() => events.investigate(target.id)}>\n            Investigar {target ? `a ${target.name}` : ''}\n          </button>\n        );\n      }\n      case 'medico': {\n        return (\n          <button disabled={!target} className={classes.join(' ')} onClick={() => events.protect(target.id)}>\n            Proteger {target ? `a ${target.name}` : ''}\n          </button>\n        );\n      }\n      default: return null;\n    }\n  }\n  return null;\n}\n\nconst Playing = ({ game, me, events }) => {\n  const [target, setTarget] = useState(null);\n\n  const selectTarget = (who) => {\n    if (target && target.id === who) {\n      setTarget(null);\n    } else {\n      const target = game.players.find(p => p.id === who);\n      setTarget(target);\n    }\n  }\n\n  if (!me) return <div>Loading...</div>;\n  return (\n    <>\n      <h2 className={styles.title}>Dia {game.dayCount}</h2>\n      {game.turn !== 'admin' && <h4 className={styles.subtitle}>Es el turno de <b>{game.turn}</b></h4>}\n      <div className={[styles.playerList, styles[game.daytime]].join(' ')}>\n        <ul>\n          {game.players.map((p) => {\n            if (p.isAdmin) return null;\n            const selected = me.job === game.turn && target && target.id === p.id;\n            const disabled = p.status === 'dead';\n            return (\n              <Player\n                key={p.id}\n                player={p}\n                me={me}\n                handleClick={selectTarget}\n                selected={selected}\n                disabled={disabled}\n              />\n            )\n          })}\n        </ul>\n      </div>\n      <div className={styles.buttons}>\n        {renderButtons(game.turn, me, events, target)}\n        {me.isAdmin && renderAdmin(game, events, target)}\n      </div>\n    </>\n  )\n}\n\nexport default Playing;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport \"./index.css\";\nimport Landing from \"./Components/Landing\";\nimport Game from \"./Components/Game\";\n\n// import * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route path=\"/\" exact>\n          <Landing />\n        </Route>\n        <Route path=\"/game\" exact>\n          <Game />\n        </Route>\n      </Switch>\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}